port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
udp: true
unified-delay: true
tcp-concurrent: true

profile:
  store-selected: true
  store-fake-ip: true

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - https://dns.cloudflare.com/dns-query
    - https://dns.google/dns-query
  fallback:
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853
  fallback-filter:
    geoip: true
    geoip-code: CN

# =========================
# ç­–ç•¥ç»„ï¼šç¬¬ä¸€å±‚ï¼ˆåº”ç”¨ï¼‰+ ç¬¬äºŒå±‚ï¼ˆå›½å®¶æµ‹é€Ÿï¼‰
# å…³é”®ï¼šinclude-all + filter è‡ªåŠ¨ä» proxies é‡Œç­›é€‰
# =========================
proxy-groups:
  # ---- å›½å®¶æµ‹é€Ÿç»„ï¼ˆç¬¬äºŒå±‚ï¼‰----
  - name: "ğŸš€ HK"
    type: url-test
    include-all: true
    filter: "(?i)(ğŸ‡­ğŸ‡°|é¦™æ¸¯|\\bHK\\b|hong\\s*kong)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50

  - name: "ğŸš€ JP"
    type: url-test
    include-all: true
    filter: "(?i)(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|\\bJP\\b|tokyo|osaka)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50

  - name: "ğŸš€ TW"
    type: url-test
    include-all: true
    filter: "(?i)(ğŸ‡¹ğŸ‡¼|å°æ¹¾|\\bTW\\b|taiwan|taipei|hinet)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50

  - name: "ğŸš€ US"
    type: url-test
    include-all: true
    filter: "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|\\bUS\\b|united\\s*states|los\\s*angeles|san\\s*jose|seattle|new\\s*york)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50

  - name: "ğŸš€ SG"
    type: url-test
    include-all: true
    filter: "(?i)(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|\\bSG\\b|singapore)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50

  - name: "â™»ï¸ Fallback"
    type: fallback
    proxies: ["ğŸš€ HK","ğŸš€ SG","ğŸš€ JP","ğŸš€ US","ğŸš€ TW"]
    url: http://www.gstatic.com/generate_204
    interval: 300

  # ---- é»˜è®¤å‡ºå£ï¼ˆå…œåº•ï¼‰----
  - name: "ğŸŒ Default"
    type: select
    proxies:
      - â™»ï¸ Fallback
      - ğŸš€ HK
      - ğŸš€ SG
      - ğŸš€ JP
      - ğŸš€ US
      - ğŸš€ TW
      - DIRECT

  # ---- åº”ç”¨ç­–ç•¥ç»„ï¼ˆç¬¬ä¸€å±‚ï¼‰----
  - name: "ğŸ¬ YouTube"
    type: select
    proxies: ["ğŸš€ TW","ğŸš€ JP","ğŸš€ HK","ğŸŒ Default","DIRECT"]

  - name: "ğŸ¤– ChatGPT"
    type: select
    proxies: ["ğŸš€ JP","ğŸš€ US","ğŸš€ SG","ğŸŒ Default"]

  - name: "ğŸ Apple"
    type: select
    proxies: ["ğŸš€ US","DIRECT","ğŸŒ Default"]

  - name: "ğŸ“¨ Telegram"
    type: select
    proxies: ["ğŸš€ SG","ğŸš€ HK","ğŸš€ JP","ğŸŒ Default"]

  - name: "ğŸ§  AI"
    type: select
    proxies: ["ğŸš€ JP","ğŸš€ SG","ğŸš€ US","ğŸŒ Default"]

  - name: "ğŸŸ¦ OKX"
    type: select
    proxies: ["ğŸš€ HK","ğŸš€ SG","ğŸŒ Default","DIRECT"]

  - name: "ğŸŸ¨ Binance"
    type: select
    proxies: ["ğŸš€ HK","ğŸš€ SG","ğŸŒ Default","DIRECT"]

  - name: "ğŸŸ¥ Adobe"
    type: select
    proxies: ["ğŸš€ US","ğŸš€ JP","ğŸŒ Default","DIRECT"]

  - name: "ğŸŸª Proton"
    type: select
    proxies: ["ğŸš€ US","ğŸš€ SG","ğŸš€ JP","ğŸŒ Default"]

  # é¢æ¿æ€»å¼€å…³ï¼ˆå¯é€‰ï¼‰
  - name: "ğŸš€ PROXY"
    type: select
    proxies: ["ğŸŒ Default","â™»ï¸ Fallback","DIRECT"]

# =========================
# è§„åˆ™é›†ï¼ˆMetaCubeXï¼‰
# =========================
rule-providers:
  youtube:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/youtube.yaml"
    path: ./ruleset/youtube.yaml
    interval: 86400

  openai:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/openai.yaml"
    path: ./ruleset/openai.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/apple.yaml"
    path: ./ruleset/apple.yaml
    interval: 86400

  telegram:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/telegram.yaml"
    path: ./ruleset/telegram.yaml
    interval: 86400

  okx:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/okx.yaml"
    path: ./ruleset/okx.yaml
    interval: 86400

  binance:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/binance.yaml"
    path: ./ruleset/binance.yaml
    interval: 86400

  adobe:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/adobe.yaml"
    path: ./ruleset/adobe.yaml
    interval: 86400

  ai:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/ai.yaml"
    path: ./ruleset/ai.yaml
    interval: 86400

  cn:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/release/cn.yaml"
    path: ./ruleset/cn.yaml
    interval: 86400

# =========================
# è§„åˆ™ï¼ˆé¡ºåºéå¸¸é‡è¦ï¼‰
# =========================
rules:
  - RULE-SET,openai,ğŸ¤– ChatGPT
  - RULE-SET,youtube,ğŸ¬ YouTube
  - RULE-SET,apple,ğŸ Apple
  - RULE-SET,ai,ğŸ§  AI
  - RULE-SET,telegram,ğŸ“¨ Telegram
  - RULE-SET,okx,ğŸŸ¦ OKX
  - RULE-SET,binance,ğŸŸ¨ Binance
  - RULE-SET,adobe,ğŸŸ¥ Adobe

  # Protonï¼ˆå¸¸ç”¨åŸŸåï¼Œè¶³å¤Ÿç¨³å®šï¼‰
  - DOMAIN-SUFFIX,proton.me,ğŸŸª Proton
  - DOMAIN-SUFFIX,protonvpn.com,ğŸŸª Proton
  - DOMAIN-SUFFIX,protonmail.com,ğŸŸª Proton
  - DOMAIN-SUFFIX,pm.me,ğŸŸª Proton
  - DOMAIN-SUFFIX,protonstatus.com,ğŸŸª Proton

  # å›½å†…ç›´è¿
  - RULE-SET,cn,DIRECT
  - GEOIP,CN,DIRECT

  # å…œåº•
  - MATCH,ğŸŒ Default
